angular.module("nlTables",[]).directive("nlTables",function(){return{restrict:"A",template:"<table class='table table-striped table-hover table-bordered table-vmiddle table-condensed'>   <thead>       <tr>           <td ng-if='showTableIndex'>#</td>           <td ng-repeat='column in nltable.columns'>{{column.title}}</td>       </tr>   </thead>   <tbody>       <tr ng-if='nltable.data == undefined || nltable.data.length == 0'>           <td class='text-center tr-no-data' colspan='{{nltable.columns.length + 1}}' style='text-align: center'>               <span>{{nltable.tip.notFoundRecord}}</span>           </td>       </tr>       <tr ng-if='nltable.data.length > 0' ng-repeat='row in nltable.data'>           <td ng-if='showTableIndex'>{{$index + 1}}</td>           <td ng-repeat='column in nltable.columns'                ng-bind-html='(column.format ? column.format(row) : row[column.name])|trustAsHtml'></td>       </tr>   </tbody></table>",replace:!0}}).directive("nlTurnPage",function(){return{restrict:"A",template:"<ul class='pagination' ng-show='nltable.rows > 0' style='margin:0px;'>   <li ng-class='{disabled:(nltable.pageNo == 1) }'>       <a ng-click='nltable.pre()'><span aria-hidden='true'>&laquo;</span></a>   </li>   <li ng-repeat='i in nltable.pages' ng-class='{active:(i.index == nltable.pageNo)}'>       <a ng-click='nltable.go(i.index)'>{{i.text}}</a>   </li>   <li ng-class='{disabled:(nltable.pageNo == nltable.pageCount) }'>       <a ng-click='nltable.next()' ><span aria-hidden='true'>&raquo;</span></a>   </li></ul>",replace:!0}}).factory("NLTables",function(){function t(t,e,a){var n={columns:t,pageSize:a.pageSize,splitPages:2,pageCount:0,pageNo:0,nextPage:a?a.pageNo||1:1,prePage:a?a.pageNo||1:1,tip:{notFoundRecord:"未找到记录"},go:function(t){if(this.pageNo!=t){this.pageNo=t;var n=this;a&&(a.pageNo=t),e(a||{},function(t){n=angular.extend(n,t),n.build()})}},refresh:function(){var t=this;e(a||{},function(e){t=angular.extend(t,e),t.build()})},build:function(){var t=Math.ceil(this.rows/this.pageSize);this.pageCount=0==t?1:t;var e=new Array;this.splitPages=this.splitPages<=3?3:this.splitPages;for(var a=0,n=0;t>n&&(0!=n&&n+2<=this.pageNo-this.splitPages?(e[a]={index:this.pageNo-2*this.splitPages-1,text:"……"},n=this.pageNo-this.splitPages-2):n==this.pageNo+this.splitPages&&n+1!=this.pageCount?(e[a]={index:n+1+this.splitPages,text:"……"},n=t-2):e[a]={index:n+1,text:n+1},a++,!(a>20));n++);this.pages=e,this.nextPage=this.pageNo+1>t?t:this.pageNo+1,this.prePage=1==this.pageNo?1:this.pageNo-1},next:function(){this.pageNo+1>this.pageCount||this.go(this.pageNo+1)},pre:function(){1!=this.pageNo&&this.go(this.pageNo-1)},pages:[]};return n.go(a?a.pageNo||1:1),n}return t});